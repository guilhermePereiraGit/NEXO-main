<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Totem</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="../../assets/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../geral.css">
    <link rel="stylesheet" href="../gestor/dashboard_gestor.css">
    <link rel="stylesheet" href="dashboard_tecnico.css">
    <link rel="stylesheet" href="totem.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body onload="identificarTotem(),graficoVelocimetro()">
    <div class="all">
        <header>
            <div class="header-all">
                <div class="user">
                    <img src="../../assets/imgs/user.png">
                    <div class="text">
                        <label id="nome">Gabriel</label>
                        <label id="cargo">Técnico em Operação</label>
                    </div>
                </div>
                <div class="navegation">
                    <a href="dashboard_tecnico.html" id="voltar">Voltar</a>
                </div>
                <div class="suporte">
                    <a
                        href="https://nexoadm.atlassian.net/jira/servicedesk/projects/NEXO/summary?ignoreStickyVersion=true"><img
                            src="../../assets/imgs/icon-jira.png"></a>
                    <a href="https://app.slack.com/client/T09LFRM7PFX/C09LH8XJS22"><img
                            src="../../assets/imgs/icon-slack.png"></a>
                </div>
            </div>
        </header>
        <div class="content">
            <div class="first">
                <div class="first-region">
                    <h1>Totem: <span id="totem_escolhido"></span></h1>
                    <!-- <div class="zona" id="zona">
                        <label>Escolha a Zona:</label>
                        <select name="regiao_atuacao" id="regiao_atuacao" onchange="carregarRegioes()">
                            <option value="x">Escolha uma Opção</option>
                            <option value="AC">Zona Norte</option>
                            <option value="AL">Zona Sul</option>
                            <option value="AP">Zona Leste</option>
                            <option value="AM">Zona Oeste</option>
                            <option value="BA">Centro</option>
                        </select>
                    </div> -->

                    <div class="alertas">
                        <img src="../../assets/imgs/icon-alerta.png">
                        <div class="alertas-text">
                            <h2>Alerta de Grau Muito Perigoso</h2>
                            <p>Causa: Consumo Excessivo Constante de CPU</p>
                        </div>
                    </div>
                    <div class="localizacao">
                        <div class="bloco">
                            <h2>MAC: <span id="mac">154724027927939</span></h2>
                            <h2>Modelo: <span id="modelo">AA0123</span></h2>
                            <h2>Status: <span id="status">Ligado</span></h2>
                            <h2>CEP: <span id="cep">00222-333</span></h2>
                            <h2>Telefone: <span id="telefone">(11)99993-4454</span></h2>
                        </div>
                        <div class="bloco">
                            <h2>Cidade: <span id="cidade">São Paulo</span></h2>
                            <h2>Bairro: <span id="bairro">Jardins</span></h2>
                            <h2>Rua <span id="rua">Rua Tavares</span></h2>
                            <h2>Número: <span id="numero">34</span></h2>
                        </div>
                    </div>

                    <div class="processos">
                        <h1>Top 5 Processos</h1>
                        <table class="table-processos">
                            <tr>
                                <th>Nome</th>
                                <th>CPU (%)</th>
                                <th>RAM (%)</th>
                                <th>DISCO (%)</th>
                            </tr>
                            <tr>
                                <th>chrome.exe</th>
                                <th>15</th>
                                <th>8</th>
                                <th>15</th>
                            </tr>
                            <tr>
                                <th>totem-updater.exe</th>
                                <th>12.5</th>
                                <th>8.5</th>
                                <th>7.5</th>
                            </tr>
                            <tr>
                                <th>antivirus.exe</th>
                                <th>10</th>
                                <th>8</th>
                                <th>2</th>
                            </tr>
                            <tr>
                                <th>order-service.exe</th>
                                <th>5</th>
                                <th>7</th>
                                <th>5</th>
                            </tr>
                            <tr>
                                <th>network-manager.exe</th>
                                <th>3</th>
                                <th>4</th>
                                <th>1</th>
                            </tr>
                            <tr>
                                <th>Processos de Sistema</th>
                                <th>24.5</th>
                                <th>4.5</th>
                                <th>29,5</th>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="first-real">
                    <div class="real-time">
                        <h1>Monitoramento dos Componentes</h1>
                        <div class="graficos">
                            <div class="part1-graficos" id="parte1">
                                <div class="grafico">
                                    <div class="velo-one">
                                        <canvas id="primeiro-grafico" class="chart-container"></canvas>
                                    </div>
                                    <h1 id="cpu">CPU(70%)</h1>
                                </div>
                                <div class="grafico">
                                    <div class="velo-one">
                                        <canvas id="segundo-grafico" class="chart-container"></canvas>
                                    </div>
                                    <h1 id="ram">RAM(40%)</h1>
                                </div>
                            </div>
                            <div class="part1-graficos">
                                <div class="grafico">
                                    <div class="velo-one">
                                        <canvas id="terceiro-grafico" class="chart-container"></canvas>
                                    </div>
                                    <h1 id="disco">DISCO(50%)</h1>
                                </div>
                                <div class="grafico-special">
                                    <h1 id="processos">280</h1>
                                    <h2>PROCESSOS</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="parametros">
                        <h2 style="margin-top: 20px;">Parâmetros Utilizados</h2>
                        <div class="all-param">
                            <div class="part-parametros">
                                <div class="parametro">
                                    <h2>CPU: </h2>
                                    <div class="part" style="background-color: #4ed259;">45%</div>
                                    <div class="part" style="background-color: #FFD700;">75%</div>
                                    <div class="part" style="background-color: #FF8C00;">80%</div>
                                    <div class="part" style="background-color: #FF0000;">100%</div>
                                </div>
                                <div class="parametro">
                                    <h2>RAM: </h2>
                                    <div class="part" style="background-color: #4ed259;">75%</div>
                                    <div class="part" style="background-color: #FFD700;">85%</div>
                                    <div class="part" style="background-color: #FF8C00;">90%</div>
                                    <div class="part" style="background-color: #FF0000;">100%</div>
                                </div>
                            </div>
                            <div class="part-parametros">
                                <div class="parametro">
                                    <h2>DISCO: </h2>
                                    <div class="part" style="background-color: #4ed259;">68%</div>
                                    <div class="part" style="background-color: #FFD700;">75%</div>
                                    <div class="part" style="background-color: #FF8C00;">88%</div>
                                    <div class="part" style="background-color: #FF0000;">100%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    function identificarTotem() {
        var totem_escolhido = document.getElementById("totem_escolhido");
        totem_escolhido.innerHTML = sessionStorage.getItem("TOTEM_SELECIONADO");
        //mac,modelo,status,cep,telefone,cidade,bairro,rua,numero
        if (sessionStorage.getItem("TOTEM_SELECIONADO") == "AA05000") {
            document.getElementById('mac').innerHTML = "154724027927939";
            document.getElementById('modelo').innerHTML = "AA0123";
            document.getElementById('cep').innerHTML = "00222-333";
            document.getElementById('telefone').innerHTML = "(11)98802-2449";
            document.getElementById('cidade').innerHTML = "São Paulo";
            document.getElementById('bairro').innerHTML = "Jardins";
            document.getElementById('rua').innerHTML = "Rua Tavares"
            document.getElementById('numero').innerHTML = "34";
            consumoCPU = 70;
            sobraCPU = 30;
            consumoRAM = 40;
            sobraRAM = 60;
            consumoDISCO = 50;
            sobraDISCO = 50;
            document.getElementById('cpu').innerHTML = `CPU(${consumoCPU}%)`
            document.getElementById('ram').innerHTML = `RAM(${consumoRAM}%)`
            document.getElementById('disco').innerHTML = `DISCO(${consumoDISCO}%)`
            document.getElementById('processos').innerHTML = `280`
        } else if (sessionStorage.getItem("TOTEM_SELECIONADO") == "AA05001") {
            document.getElementById('mac').innerHTML = "847365987304912";
            document.getElementById('modelo').innerHTML = "AA0123";
            document.getElementById('cep').innerHTML = "11333-444";
            document.getElementById('telefone').innerHTML = "(11)49002-8922";
            document.getElementById('cidade').innerHTML = "São Paulo";
            document.getElementById('bairro').innerHTML = "Cequeira Cesar"
            document.getElementById('rua').innerHTML = "Rua Haddock Lobo"
            document.getElementById('numero').innerHTML = "595"
            consumoCPU = 50;
            sobraCPU = 50;
            consumoRAM = 20;
            sobraRAM = 80;
            consumoDISCO = 20;
            sobraDISCO = 80;
            document.getElementById('cpu').innerHTML = `CPU(${consumoCPU}%)`
            document.getElementById('ram').innerHTML = `RAM(${consumoRAM}%)`
            document.getElementById('disco').innerHTML = `DISCO(${consumoDISCO}%)`
            document.getElementById('processos').innerHTML = `270`
        } else if (sessionStorage.getItem("TOTEM_SELECIONADO") == "AA05002") {
            document.getElementById('mac').innerHTML = "194837201948573";
            document.getElementById('modelo').innerHTML = "AA0124";
            document.getElementById('cep').innerHTML = "22444-555";
            document.getElementById('telefone').innerHTML = "(11)94023-1232";
            document.getElementById('cidade').innerHTML = "Carapicuiba"
            document.getElementById('cidade').innerHTML = "Santa Terezina"
            document.getElementById('rua').innerHTML = "Doutor João Veloso"
            document.getElementById('numero').innerHTML = "216"
            consumoCPU = 70;
            sobraCPU = 30;
            consumoRAM = 70;
            sobraRAM = 30;
            consumoDISCO = 90;
            sobraDISCO = 10;
            document.getElementById('cpu').innerHTML = `CPU(${consumoCPU}%)`
            document.getElementById('ram').innerHTML = `RAM(${consumoRAM}%)`
            document.getElementById('disco').innerHTML = `DISCO(${consumoDISCO}%)`
            document.getElementById('processos').innerHTML = `260`
        }else{
            consumoCPU = 70;
            sobraCPU = 30;
            consumoRAM = 40;
            sobraRAM = 60;
            consumoDISCO = 50;
            sobraDISCO = 50;
            document.getElementById('cpu').innerHTML = `CPU(${consumoCPU}%)`
            document.getElementById('ram').innerHTML = `RAM(${consumoRAM}%)`
            document.getElementById('disco').innerHTML = `DISCO(${consumoDISCO}%)`
            document.getElementById('processos').innerHTML = `280`
        }
        graficoVelocimetro(consumoCPU, sobraCPU, consumoRAM,
            sobraRAM, consumoDISCO, sobraDISCO)
    }

    function graficoVelocimetro(consumoCPU, sobraCPU, consumoRAM,
        sobraRAM, consumoDISCO, sobraDISCO) {
        if (consumoCPU < 45) {
            corCPUPreenchida = "#4ed259"
        } else if (consumoCPU <= 75) {
            corCPUPreenchida = "#FFD700";
        } else if (consumoCPU <= 80) {
            corCPUPreenchida = "#FF8C00"
        } else if (consumoCPU > 80) {
            corCPUPreenchida = "#FF0000"
        }

        coresCpu = [corCPUPreenchida, "#eae3ff"];
        dadosCpu = [consumoCPU, sobraCPU];

        // CPU
        const data = {
            labels: ['Em Uso', 'Disponível'],
            datasets: [{
                data: dadosCpu,
                backgroundColor: coresCpu
            }]
        }

        ctx = document.getElementById("primeiro-grafico");
        new Chart(ctx, {
            type: 'doughnut',
            data: data,
            options: {
                aspectRatio: 2,
                circumference: 180,
                rotation: -90
            }
        })

        if (consumoRAM < 75) {
            corRAMPreenchida = "#4ed259"
        } else if (consumoRAM <= 85) {
            corRAMPreenchida = "#FFD700";
        } else if (consumoRAM <= 90) {
            corRAMPreenchida = "#FF8C00"
        } else if (consumoRAM > 90) {
            corRAMPreenchida = "#FF0000"
        }

        coresRam = [corRAMPreenchida, "#eae3ff"];
        dadosRam = [consumoRAM, sobraRAM];

        // RAM
        const data2 = {
            labels: ['Em Uso', 'Disponível'],
            datasets: [{
                data: dadosRam,
                backgroundColor: coresRam
            }]
        }

        cty = document.getElementById("segundo-grafico");
        new Chart(cty, {
            type: 'doughnut',
            data: data2,
            options: {
                aspectRatio: 2,
                circumference: 180,
                rotation: -90
            }
        })

        if (consumoDISCO < 68) {
            corDISCOPreenchida = "#4ed259"
        } else if (consumoDISCO <= 75) {
            corDISCOPreenchida = "#FFD700";
        } else if (consumoDISCO <= 88) {
            corDISCOPreenchida = "#FF8C00"
        } else if (consumoDISCO > 88) {
            corDISCOPreenchida = "#FF0000"
        }

        coresDisco = [corDISCOPreenchida, "#eae3ff"];
        dadosDisco = [consumoDISCO, sobraDISCO];

        // DISCO
        const data3 = {
            labels: ['Em Uso', 'Disponível'],
            datasets: [{
                data: dadosDisco,
                backgroundColor: coresDisco
            }]
        }

        ctz = document.getElementById("terceiro-grafico");
        new Chart(ctz, {
            type: 'doughnut',
            data: data3,
            options: {
                aspectRatio: 2,
                circumference: 180,
                rotation: -90
            }
        })
    }
</script>

</html>