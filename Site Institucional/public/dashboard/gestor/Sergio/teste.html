<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Modelo AA0385123</title>
    
    <!-- Fontes e Ícones -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <!-- ApexCharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <style>
        /* --- CSS GERAL --- */
        * {
            padding: 0;
            margin: 0;
            font-family: 'Poppins', sans-serif;
            box-sizing: border-box;
        }

        :root {
            --principal: #451c8b;
            --contraste: #c8c1ff;
            --fundo: #eeecff;
            
            --roxo-nexo: #8c52ff;
            --roxo-claro: #f3efff;
            --cinza-texto: #333333;
            --cinza-claro: #666666;
            
            --amarelo-atencao: #FFC107;
            --laranja-perigoso: #FFA500;
            --vermelho-muito-perigoso: #F44336;
            --verde-sucesso: #4CAF50;
            --texto-branco: #ffffff;

            --cor-cpu: #8C52FF;
            --cor-ram: #00C49F;
            --cor-disco: #008FFB;
            --cor-processos: #3F51B1;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden; /* Zero scroll */
        }

        .container {
            display: flex;
            flex-direction: row;
            height: 100vh;
            width: 100vw;
        }

        /* Barra Lateral */
        .nav-bar {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            width: 80px; /* Reduzido */
            height: 100%;
            background-color: var(--principal);
            flex-shrink: 0;
        }

        .sair { margin-top: 30px; cursor: pointer; }
        .bi { font-size: 30px; color: white; transition: 0.3s; } /* Reduzido */
        .bi:hover { transform: scale(1.1); }

        /* Área Principal */
        .main {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            height: 100%;
        }

        .topo {
            display: flex;
            flex-direction: row;
            width: 100%;
            height: 50px; /* Altura fixa bem reduzida */
            background-color: var(--contraste);
            justify-content: space-between;
            align-items: center;
            color: var(--principal);
            padding: 0 20px;
            flex-shrink: 0;
        }

        .topo h2 { font-weight: 600; font-size: 18px; }

        .baixo {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--fundo);
            flex-grow: 1;
            padding: 8px; /* Padding mínimo */
            height: calc(100vh - 50px);
            overflow: hidden;
        }

        /* --- DASHBOARD FLEXÍVEL --- */
        .conteudo {
            height: 100%;
            width: 100%;
            max-width: 100%;
            background-color: transparent;
            display: flex;
            flex-direction: column;
            gap: 6px; /* Gap mínimo */
        }

        .periodo-indicador {
            background-color: #ffffff;
            color: var(--roxo-nexo);
            font-weight: 600;
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(57, 18, 112, 0.04);
            border: 1px solid #dcd1fa;
            flex-shrink: 0;
        }

        /* Seções Flexíveis com min-height: 0 para permitir encolhimento total */
        .kpis-container {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 8px;
            flex: 2; /* Peso 2 */
            min-height: 0; 
        }

        .charts-grid-top {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            flex: 3; /* Peso 3 */
            min-height: 0;
        }

        .charts-grid-bottom {
            display: grid;
            grid-template-columns: 1fr;
            flex: 3; /* Peso 3 */
            min-height: 0;
        }

        /* Cards */
        .kpi-card, .card-chart {
            background: #ffffff;
            border-radius: 12px; /* Bordas menores */
            padding: 10px; /* Padding interno compacto */
            box-shadow: 0 2px 8px rgba(57, 18, 112, 0.05);
            border: 1px solid #e2d9ff;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%; 
            overflow: hidden;
            min-height: 0; /* Crítico para flexbox funcionar dentro */
        }

        /* Ajustes Internos KPI */
        .kpi-content {
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            flex-grow: 1;
            min-height: 0;
        }
        
        .kpi-title { font-size: 12px; font-weight: 600; color: var(--roxo-nexo); margin-bottom: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .kpi-subtitle { font-size: 9px; color: var(--cinza-claro); margin-bottom: 2px; line-height: 1.1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .kpi-value { font-size: 26px; font-weight: 700; color: #2b2140; line-height: 1; }
        .kpi-extra { font-size: 9px; color: var(--cinza-claro); margin-top: 1px; }
        
        .kpi-variacao {
            font-size: 10px; font-weight: 600; margin-top: 2px;
            display: inline-flex; align-items: center; gap: 3px;
        }
        .kpi-variacao.positivo { color: var(--verde-sucesso); }
        .kpi-variacao.negativo { color: var(--vermelho-muito-perigoso); }
        .kpi-variacao .seta { font-size: 11px; }
        
        /* KPI 1 */
        .kpi-user-info { font-size: 10px; font-weight: 600; color: #333; }
        .kpi-user-date { font-size: 9px; color: #666; margin-bottom: 2px; }
        .kpi-modelo-info .modelo-nome { font-size: 13px; font-weight: 600; color: #2b2140; }
        .kpi-modelo-info .modelo-totens { font-size: 24px; font-weight: 700; color: #2b2140; margin-top: 0px; }
        .kpi-modelo-info .modelo-extra { font-size: 9px; color: #666; }

        /* KPI 2 Chart */
        .kpi-radial-chart { flex-grow: 1; display: flex; align-items: center; justify-content: center; min-height: 40px; }

        /* KPI 4 List */
        .kpi-top-list { list-style: none; padding-left: 0; margin: 0; width: 100%; }
        .kpi-top-list li { display: flex; align-items: center; justify-content: space-between; font-size: 11px; font-weight: 600; color: #333; padding: 1px 0; }
        .kpi-top-list li .comp-name { display: flex; align-items: center; gap: 6px; }
        .kpi-top-list li .dot { width: 7px; height: 7px; border-radius: 50%; display: inline-block; }
        .kpi-top-list li .dot-cpu { background-color: var(--cor-cpu); }
        .kpi-top-list li .dot-ram { background-color: var(--cor-ram); }
        .kpi-top-list li .dot-disco { background-color: var(--cor-disco); }
        .kpi-top-list li .dot-processos { background-color: var(--cor-processos); }
        .kpi-top-list li .comp-perc { font-weight: 700; color: var(--cinza-claro); }

        /* Ajustes Gráficos */
        .card-chart .chart-title { font-size: 14px; font-weight: 700; color: #2b2140; margin-bottom: 2px; }
        .card-chart .chart-subtitle { font-size: 9px; color: #666; margin-bottom: 2px; display: none; /* Ocultar subtítulo em telas apertadas se necessário */ }
        
        #chart-alertas-componentes, #chart-alertas-sazonalidade {
            flex-grow: 1;
            min-height: 0;
            width: 100%;
            overflow: hidden; 
        }

        /* Card Parâmetros */
        .card-parametros { justify-content: space-between; overflow: hidden; }
        .card-parametros .param-title { font-size: 14px; font-weight: 700; color: #2b2140; margin-bottom: 5px; }
        
        .param-list { list-style: none; padding-left: 0; margin: 0; }
        .param-list li { font-size: 11px; color: #333; margin-bottom: 3px; display: flex; align-items: center; }
        .param-list li strong { font-weight: 600; color: var(--roxo-nexo); min-width: 70px; }
        
        .param-legenda .legenda-title { font-size: 10px; font-weight: 600; color: #333; margin-bottom: 3px; margin-top: 5px; }
        .legenda-container { display: flex; flex-direction: column; gap: 2px; }
        .legenda-item { display: flex; align-items: center; gap: 5px; font-size: 9px; padding: 3px 5px; border-radius: 4px; }
        .legenda-item span.dot { width: 6px; height: 6px; border-radius: 50%; border: 1px solid #fff; }
        
        .legenda-item.atencao { background-color: #FFF8E1; color: #b28704; }
        .legenda-item.atencao .dot { background-color: var(--amarelo-atencao); }
        .legenda-item.perigoso { background-color: #FFE0B2; color: #c37f00; } 
        .legenda-item.perigoso .dot { background-color: var(--laranja-perigoso); }
        .legenda-item.muito-perigoso { background-color: #FFEBEE; color: #c13131; }
        .legenda-item.muito-perigoso .dot { background-color: var(--vermelho-muito-perigoso); }
        .legenda-item .legenda-texto strong { font-weight: 700; }

        /* Media Queries para telas MUITO baixas (notebooks pequenos) */
        @media (max-height: 650px) {
            .kpi-value { font-size: 20px; }
            .kpi-title { font-size: 11px; }
            .param-list li { font-size: 10px; margin-bottom: 2px; }
            .topo { height: 40px; }
            .baixo { height: calc(100vh - 40px); padding: 5px; }
            .kpis-container { gap: 5px; }
            .charts-grid-top { gap: 5px; }
            .conteudo { gap: 4px; }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Barra Lateral -->
        <div class="nav-bar">
            <div class="sair">
                <i class="bi bi-box-arrow-left" onclick="window.location.href='index.html'"></i>
            </div>
        </div>

        <!-- Área Principal -->
        <div class="main">
            <div class="topo">
                <h2>Dashboard - Modelo AA0385123</h2>
            </div>

            <div class="baixo">
                <div class="conteudo">
                    
                    <div class="periodo-indicador">
                        Dados referentes aos últimos 30 dias
                    </div>

                    <!-- KPIs (Peso Flex 2) -->
                    <section class="kpis-container">
                        <!-- KPI 1 -->
                        <div class="kpi-card">
                            <div>
                                <div class="kpi-user-info">[Nome do Gestor]</div>
                                <div class="kpi-user-date">[17 de Novembro, 2025]</div>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-modelo-info">
                                    <div class="modelo-nome">Modelo AA0385123</div>
                                    <div class="modelo-totens">200</div>
                                    <div class="modelo-extra">Representa 10% do parque total</div>
                                </div>
                            </div>
                        </div>

                        <!-- KPI 2 -->
                        <div class="kpi-card">
                            <div>
                                <div class="kpi-title">Equipamentos Críticos</div>
                                <div class="kpi-subtitle">% de totens com alertas "Muito Perigoso"</div>
                            </div>
                            <div class="kpi-content">
                                <div id="kpi-radial-chart" class="kpi-radial-chart"></div>
                                <div class="kpi-extra" style="text-align: center;">12% (24 totens) do modelo estão críticos</div>
                            </div>
                        </div>

                        <!-- KPI 3 -->
                        <div class="kpi-card">
                            <div>
                                <div class="kpi-title">Total de Alertas</div>
                                <div class="kpi-subtitle"></div>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value">120</div>
                                <div class="kpi-variacao positivo">
                                    <span class="seta">▼</span>
                                    <span>15% vs período anterior</span>
                                </div>
                                <div class="kpi-extra">Menos esforço operacional no período</div>
                            </div>
                        </div>

                        <!-- KPI 4 -->
                        <div class="kpi-card">
                            <div>
                                <div class="kpi-title">Crítica por Componente</div>
                                <div class="kpi-subtitle">Ranking por alertas "Muito Perigoso"</div>
                            </div>
                            <div class="kpi-content">
                                <ul class="kpi-top-list">
                                    <li><div class="comp-name"><span class="dot dot-disco"></span> Disco</div><div class="comp-perc">58%</div></li>
                                    <li><div class="comp-name"><span class="dot dot-cpu"></span> CPU</div><div class="comp-perc">22%</div></li>
                                    <li><div class="comp-name"><span class="dot dot-processos"></span> Processos</div><div class="comp-perc">10%</div></li>
                                    <li><div class="comp-name"><span class="dot dot-ram"></span> RAM</div><div class="comp-perc">10%</div></li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <!-- Gráficos Superiores (Peso Flex 3) -->
                    <section class="charts-grid-top">
                        <div class="card-chart">
                            <div class="chart-title">Alertas por Componente</div>
                            <div class="chart-subtitle"></div>
                            <div id="chart-alertas-componentes"></div>
                        </div>

                        <div class="card-chart card-parametros">
                            <div>
                                <div class="param-title">Parâmetros de Alerta</div>
                                <ul class="param-list">
                                    <li><strong>CPU:</strong> Acima de 40% de uso</li>
                                    <li><strong>RAM:</strong> Acima de 50% de uso</li>
                                    <li><strong>Disco:</strong> Acima de 50% de uso</li>
                                    <li><strong>Processos:</strong> Acima de 500 processos</li>
                                </ul>
                            </div>
                            <div class="param-legenda">
                                <div class="legenda-title">Níveis de Alerta</div>
                                <div class="legenda-container">
                                    <div class="legenda-item atencao"><span class="dot"></span><strong>Atenção:</strong> 15 min</div>
                                    <div class="legenda-item perigoso"><span class="dot"></span><strong>Perigoso:</strong> 15 a 25 min</div>
                                    <div class="legenda-item muito-perigoso"><span class="dot"></span><strong>Muito Perigoso:</strong> > 25 min</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Gráfico Inferior (Peso Flex 3) -->
                    <section class="charts-grid-bottom">
                        <div class="card-chart">
                            <div class="chart-title">Alertas por Mês e Componente (últimos 12 meses)</div>
                            <div class="chart-subtitle">Cada coluna representa o total de alertas do mês, dividido por componente.</div>
                            <div id="chart-alertas-sazonalidade"></div>
                        </div>
                    </section>

                </div>
            </div>
        </div>
    </div>

    <script>
        // KPI Radial
        new ApexCharts(document.querySelector("#kpi-radial-chart"), {
            series: [12],
            chart: { height: '100%', type: 'radialBar', sparkline: { enabled: true } },
            plotOptions: { radialBar: { dataLabels: { name: { show: false }, value: { offsetY: -2, fontSize: '18px', color: '#F44336', fontWeight: 700 } } } },
            fill: { colors: ['#F44336'] }, labels: ['Críticos']
        }).render();

        // Barras Horizontais (Alertas por Componente)
        new ApexCharts(document.querySelector("#chart-alertas-componentes"), {
            series: [{ name: 'Alertas', data: [25, 10, 40, 15] }],
            chart: { type: 'bar', height: '100%', toolbar: { show: false } },
            plotOptions: { bar: { horizontal: true, borderRadius: 4, barHeight: '60%', distributed: true, dataLabels: { position: 'center' } } },
            colors: ['#8C52FF', '#00C49F', '#008FFB', '#3F51B1'],
            dataLabels: { enabled: true, formatter: function (val) { return val + ' alertas'; }, style: { fontSize: '10px', fontWeight: 600 } },
            xaxis: { categories: ['CPU', 'RAM', 'Disco', 'Processos'], labels: { show: true, style: { fontSize: '9px' } } },
            grid: { borderColor: '#e9e9ff', strokeDashArray: 3, xaxis: { lines: { show: true } }, yaxis: { lines: { show: false } } },
            legend: { show: false }, tooltip: { y: { formatter: (val) => val + ' alertas' } }
        }).render();

        // Colunas Empilhadas (Sazonalidade)
        new ApexCharts(document.querySelector("#chart-alertas-sazonalidade"), {
            series: [
                { name: "CPU", data: [5, 8, 6, 4, 7, 9, 6, 5, 4, 3, 4, 5] },
                { name: "RAM", data: [3, 4, 5, 3, 4, 6, 5, 4, 3, 2, 3, 4] },
                { name: "Disco", data: [7, 6, 8, 9, 10, 12, 11, 10, 8, 7, 6, 5] },
                { name: "Processos", data: [2, 3, 2, 1, 4, 3, 5, 4, 3, 2, 2, 3] }
            ],
            chart: { type: "bar", height: '100%', stacked: true, toolbar: { show: false } },
            plotOptions: { bar: { horizontal: false, columnWidth: "60%", borderRadius: 4 } },
            dataLabels: { enabled: false },
            xaxis: { categories: ["Nov/24", "Dez/24", "Jan/25", "Fev/25", "Mar/25", "Abr/25", "Mai/25", "Jun/25", "Jul/25", "Ago/25", "Set/25", "Out/25"], labels: { style: { fontSize: '9px' } } },
            grid: { borderColor: "#e9e9ff", strokeDashArray: 3 },
            colors: ['#8C52FF', '#00C49F', '#008FFB', '#3F51B1'],
            legend: { position: "top", horizontalAlign: "center", fontSize: '10px' },
            tooltip: { y: { formatter: (val) => val + " alertas" } }
        }).render();
    </script>
</body>
</html>